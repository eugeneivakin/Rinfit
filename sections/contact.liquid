<style>
.main-text-content-contact{
  font-family: "Kumbh Sans", sans-serif;
  font-weight: 400;
  font-size: 14px;
  line-height: 20px;
  letter-spacing: 0;
  text-align: center;
  max-width: 560px;
  margin: 0 auto;
}
.main-text-content-contact a{
  font-family: "Kumbh Sans", sans-serif;
  font-weight: 400;
  color: #1094E5;
  font-size: 14px;
  line-height: 20px;
  letter-spacing: 0;
  text-align: center;
}
.input-error {
  border: 1px solid red;
  background-color: #ffe6e6;
}

.disabled {
  opacity: 0.5;
  pointer-events: none;
  cursor: not-allowed;
}
.main-contact-container{
  font-family: "Kumbh Sans", sans-serif;
  font-weight: 500;
  font-size: 16px;
  line-height: 100%;
  letter-spacing: 0;
  text-transform: capitalize;
  display: flex;
  gap: 2px;
  padding-bottom: 10px;
}
.required-field.contact-message{
  border-radius: 4px;
}
.main-contact-container span{
  font-family: "Kumbh Sans", sans-serif;
  font-weight: 400;
  color: #37393699;
  font-size: 16px;
  letter-spacing: 0;
}

.uploadcare--widget__button_type_open:hover{
  cursor: pointer;
}
.uploadcare--button_size_big:hover{
  cursor: pointer;
}
.uploadcare--button_size_big:focus,
.uploadcare--button_size_big:hover,
.uploadcare--button_size_big{
  background: #F9F9F9;
  border: 1px solid #373A3633;
  color: black;
}
.uploadcare--footer__button:nth-of-type(2){
  color: #157cfc;
}
.uploadcare--button_size_big:hover{
  background: #373A36;      /* темний фон */
  color: #fff;              /* білий текст */
  border: 1px solid #373A36; 
}
.uploadcare--widget__button_type_open:focus,
.uploadcare--widget__button_type_open:hover,
.uploadcare--widget__button_type_open{
  background: #F9F9F9;
  border: 1px solid #373A3633;
  color: black;
  font-family: "Kumbh Sans", sans-serif;
  font-weight: 600;
  font-size: 14px;
  line-height: 100%;
  letter-spacing: 0;
  text-transform: uppercase;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 57px;
  border: 1px dashed #373A3633;
  border-radius: 4px;
}
.uploadcare--widget__button_type_open:hover{
  background: #373A36;      /* темний фон */
  color: #fff;              /* білий текст */
  border: 1px solid #373A36; 
}
.uploadcare--widget__button_type_open:hover img{
  filter: brightness(0) invert(1); 
}
.form-field label{
  display: none;
}
form.main-fieldset-contact .fieldset {
  gap: 20px;
}
.container-contact-main.container,
form.main-fieldset-contact{
  max-width: 630px;
  margin: 0 auto;
}
form.main-fieldset-contact{
  width: 100%;
}
.uploadcare--widget__button_type_open{
  margin-top: 20px;
}
.required-field.contact-message::placeholder,
.container-main-newsletter input::placeholder{
  font-family: "Kumbh Sans", sans-serif;
  color: #37393666;
  font-weight: 400;
  font-size: 14px;
  letter-spacing: 0;
  text-transform: capitalize;
}
.container-main-newsletter input,
.container-main-newsletter{
  left: 0 !important;
  top: 0 !important;
  width: 100% !important;
}
.uploadcare--widget__button_type_open,
.uploadcare--widget{
  width: 100%;
}
.uploadcare--widget__button_type_open div{
  width: auto;
  display: flex;
  align-items: center;
}
.form-field .text-field{
  width: 100%;
  display: block;
  text-align: justify;
  padding-top: 10px;
  font-family: "Kumbh Sans", sans-serif;
  color: #373A3699;
  font-weight: 400;
  font-size: 14px;
  line-height: 100%;
  letter-spacing: 0;
}
.button.contact-submit{
  font-family: "Kumbh Sans", sans-serif;
  font-weight: 600;
  font-size: 14px;
  letter-spacing: 0;
  text-transform: uppercase;
}
.contact-submit.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: auto;
}
.input-error {
  border-color: red !important;
}
@media (max-width: 768px){
  .container-contact-main.container,
  form.main-fieldset-contact{
    max-width: 350px;
  }
}
.uploadcare--footer__button:nth-of-type(2):hover{
  color: white;
}
</style>
{%- assign color_scheme_hash = section.settings.color_scheme.settings.background_gradient | default: section.settings.color_scheme.settings.background | md5 -%}

<div class="section-spacing color-scheme color-scheme--{{ section.settings.color_scheme.id }} color-scheme--bg-{{ color_scheme_hash }}">
  <div class="container-contact-main container container--xs">
    <div class="section-stack text-center">
      {% if section.settings.content != blank %}
        <div class="main-text-content-contact">{{ section.settings.content }}</div>
      {% else %}
        {%- render 'section-header', subheading: section.settings.subheading, heading: section.settings.title, content: section.settings.content, text_alignment: 'center' -%}
      {% endif %}
      {%- form 'contact', class: 'form main-fieldset-contact', enctype: "multipart/form-data" -%}
        {%- if form.posted_successfully? -%}
          {%- assign content = 'contact.form.success_message' | t -%}
          {%- render 'banner', status: 'success', content: content -%}
        {%- endif -%}
        
        {%- if form.errors -%}
          {%- capture content -%}
            {{ form.errors.translated_fields[form.errors.first] | capitalize }} {{ form.errors.messages[form.errors.first] }}
          {%- endcapture -%}
          {%- render 'banner', status: 'error', content: content -%}
        {%- endif -%}
        
        <div class="fieldset ">
          <div>
            <div class="main-contact-container">Full name {{ "Vector123.svg" | asset_url | img_tag }}</div>
            {%- render 'input', type: 'text', name: 'contact[name]', label: 'Enter Your Name', value: customer.name, autocomplete: 'name', classInput: 'required-field contact-name' -%}
          </div>
          <div>  
            <div class="main-contact-container">Email {{ "Vector123.svg" | asset_url | img_tag }}</div>
            {%- render 'input', type: 'email', name: 'contact[email]', label: 'Enter Your Email', value: customer.email, autocomplete: 'email', classInput: 'required-field contact-email'  -%}
          </div>
          <div>
            <div class="main-contact-container">Order # <span>(optional)</span></div>
            {%- render 'input', type: 'text', name: 'contact[order_number]', label: 'Enter Your Order Number', required: false -%}
          </div>
          <div>
            <div class="main-contact-container">Message {{ "Vector123.svg" | asset_url | img_tag }}</div>
            {%- render 'input', name: 'contact[body]', label: 'Enter Your Message', multiline: 4, classInput: 'required-field contact-message'-%}
          </div>
          <div class="form-field">
            <label for="contact-file">Attach files</label>
            <input type="hidden" role="uploadcare-uploader" name="contact[uploaded_file]" />
            <span class="text-field">Attach up to 10 files. The maximum allowed size per file is 10 MB.</span>
          </div>
        </div>
        {%- render 'button', content: 'send your request', type: 'submit', classInput: 'contact-submit' -%}
      {%- endform -%}
    </div>
  </div>
</div>

<script>
  UPLOADCARE_PUBLIC_KEY = '384d95f7230a6fe5b3ae';
  document.addEventListener('DOMContentLoaded', function () {
    const interval = setInterval(() => {
      const uploadBtn = document.querySelector('.uploadcare--widget__button_type_open');
      if (uploadBtn) {
        uploadBtn.innerHTML = '<div>{{ "ic_round-attach-file.svg" | asset_url | img_tag }} Attach files</div>';
        clearInterval(interval);
      }
    }, 100);
  });
</script>
<script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js" charset="utf-8"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const form = document.querySelector('form.form');
  const submitButton = form.querySelector('.contact-submit');
  const requiredFields = form.querySelectorAll('.required-field');

  function isValidEmail(email) {
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailPattern.test(email);
  }

  function validateForm() {
    let isValid = true;

    requiredFields.forEach(field => {
      const value = field.value.trim();

      if (!value) {
        field.classList.add('input-error');
        isValid = false;
      } else if (field.classList.contains('contact-email') && !isValidEmail(value)) {
        field.classList.add('input-error');
        isValid = false;
      } else {
        field.classList.remove('input-error');
      }
    });

    if (isValid) {
      submitButton.classList.remove('disabled');
    } else {
      submitButton.classList.add('disabled');
    }

    return isValid;
  }

  let firstClickDone = false;

  form.addEventListener('submit', function (e) {
    if (!firstClickDone) {
      const isValid = validateForm();
      firstClickDone = true;
      
      if (!isValid) {
          e.preventDefault(); 
        }
      } else {

        const isValid = validateForm();
        if (!isValid) {
          e.preventDefault();
        }
      }
    });

    requiredFields.forEach(field => {
      field.addEventListener('input', function () {
        if (firstClickDone) {
          validateForm();
        }
      });
    });
});
</script>


{% schema %}
{
  "name": "t:sections.contact.name",
  "class": "shopify-section--contact",
  "tag": "section",
  "disabled_on": {
    "groups": ["header", "custom.overlay"]
  },
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:global.colors.scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "separate_section_with_border",
      "label": "t:global.section.separate_section_with_border",
      "default": true
    },
    {
      "type": "inline_richtext",
      "id": "subheading",
      "label": "t:global.text.subheading"
    },
    {
      "type": "inline_richtext",
      "id": "title",
      "label": "t:global.text.heading",
      "default": "Contact"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "t:global.text.content"
    }
  ],
  "blocks": [
    {
      "type": "text",
      "name": "t:sections.contact.blocks.text.name",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.contact.blocks.text.name_label",
          "default": "Custom field"
        },
        {
          "type": "checkbox",
          "id": "use_long_text",
          "label": "t:sections.contact.blocks.text.use_long_text",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "required",
          "label": "t:sections.contact.blocks.text.required",
          "default": false
        }
      ]
    },
    {
      "type": "dropdown",
      "name": "t:sections.contact.blocks.dropdown.name",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.contact.blocks.dropdown.name_label",
          "default": "Custom field"
        },
        {
          "type": "text",
          "id": "values",
          "label": "t:sections.contact.blocks.dropdown.values",
          "info": "t:sections.contact.blocks.dropdown.values_info",
          "default": "value 1, value 2, value 3"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.contact.presets.contact_form.name",
      "settings": {}
    }
  ]
}
{% endschema %}