{%- comment -%}
----------------------------------------------------------------------------------------------------------------------
MEGA MENU IMAGES COMPONENT
----------------------------------------------------------------------------------------------------------------------

Render the images for a given mega-menu

********************************************
Supported variables
********************************************

* context: can be "menu" or "sidebar". This info slightly changes the alignment
* block: the block containing all the information about the menu to render
{%- endcomment -%}

{%- for i in (1..5) -%}
  {%- assign image_setting = 'image_' | append: i -%}
  {%- assign heading_setting = 'image_' | append: i | append: '_heading' -%}
  {%- assign text_setting = 'image_' | append: i | append: '_text' -%}
  {%- assign link_setting = 'image_' | append: i | append: '_link' -%}
  {%- assign menu_setting = 'image_' | append: i | append: '_menu' -%}
  
  {%- assign url_main_link = 'url_' | append: i | append: '_main' -%}


  {%- capture image_content -%}
    {%- if block.settings[image_setting] -%}
      <a href='{{ block.settings[url_main_link] }}' class="overflow-hidden">
        {{- block.settings[image_setting] | image_url: width: block.settings[image_setting].width | image_tag: loading: 'lazy', sizes: '315px', widths: '315,630,945', class: 'image-main-menu-mega' -}}
      </a>
    {%- endif -%}

    {%- if block.settings[heading_setting] != blank or block.settings[text_setting] != blank -%}
      <div class="v-stack text-center {% if context == 'menu' %}gap-2.5{% else %}gap-0.5{% endif %}">
        {%- if block.settings[heading_setting] != blank -%}
          <a href='{{ block.settings[url_main_link] }}' class="h6 main-title-link">{{ block.settings[heading_setting] }}</a>
           
          {%- if block.settings[menu_setting] != blank -%}
            <nav class="promo-menu  promo-menu-main-header">
              <ul>
                {%- for link in linklists[block.settings[menu_setting]].links -%}
                  <li>
                    <a href="{{ link.url }}">{{ link.title }}</a>
                  </li>
                {%- endfor -%}
              </ul>
            </nav>
          {%- endif -%}
        {%- endif -%}

        {%- if block.settings[text_setting] != blank -%}
          <p class="smallcaps text-xs text-subdued">{{ block.settings[text_setting] }}</p>
        {%- endif -%}
      </div>
    {%- endif -%}
  {%- endcapture -%}

  {%- if image_content != blank -%}
    {%- if block.settings[link_setting] != blank -%}
      <a href="{{ block.settings[link_setting] }}" class="v-stack justify-items-center gap-4 sm:gap-5 group ">
        {{- image_content -}}
      </a>
    {%- else -%}
      <div class="v-stack justify-items-center gap-4 sm:gap-5 group header_main_menu-mob">
        {{- image_content -}}
      </div>
    {%- endif -%}
  {%- endif -%}
{%- endfor -%}